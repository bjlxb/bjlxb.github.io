---
layout: photo
title: 测试-python文件操作
tags:
  - 测试
date: 2022-02-22 14:08:21
categories: 测试
photos:
---
python中文件操作相关
<!--more-->
### 4G内存怎么读取一个5G的数据
方法一:
可以通过生成器，分多次读取，每次读取数量相对少的数据(比如 500MB)进行处理，处理结束后在读取后面的500MB的数据。
方法二:
可以通过linux命令split切割成小文件，然后再对数据进行处理，此方法效率比较高。
可以按照行数切割，可以按照文件大小切割。

### 处理一个大小为 10G 的文件，但是内存只有 4G，如果在只修改get_lines 函数而其他代码保持不变的情况下，实现方案。有什么问题需要考虑。
```python
def get_lines():
	l = []
	with open(‘file.txt’，’rb’) as f:
		data = f.readlines(60000)
		l.append(data)
		yield l
```
  要考虑到的问题有:内存只有 4G 无法一次性读入 10G 的文件，需要分批读入。
  分批读入数据要记录每次读入数据的位置。
  分批每次读入数据的大小，太小就会在读取操作上花费过多时间。
  
### read、readline 和 readlines 的区别
  read: 读取整个文件。 
  readline: 读取下一行，使用生成器方法。 
  readlines: 读取整个文件到一个迭代器以供我们遍历。
