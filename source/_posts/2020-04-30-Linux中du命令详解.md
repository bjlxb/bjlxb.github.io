---
layout: photo
title: Linux中du命令详解
tags:
  - Tool
date: 2020-04-30 23:29:34
categories: Tool
photos:
---
记录下工作中在Linux系统中使用的du命令。
<!--more-->
####  du详解
  du : 显示每个文件和目录的磁盘使用空间
命令参数：
```
# 显示目录中文件的大小，单位：KB 
-a 或 -all
# 显示目录中文件的大小，单位：字节byte
-b 或 -bytes
# 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和，单位：KB
-c 或 --total
# 显示目录中文件的大小，单位：KB
-k 或 --kilobytes
# 显示目录中文件的大小，单位：MB
-m 或 --megabytes
# 仅显示总计，只列出最后加总的值，单位：KB。
-s 或 --summarize
# K，M，G为单位，提高信息的可读性
-h
# 开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过
-x 或 --one-file-system
# 显示选项中所指定符号链接的源文件大小
-L<符号链接> 或 --dereference<符号链接>
# 显示个别目录的大小时，并不含其子目录的大小
-S 或 --separate-dirs
# 在<文件>指定目录或文件 
-X<文件> 或 --exclude-from=<文件>
# 略过指定的目录或文件
--exclude=<目录或文件>
# 显示指定符号链接的源文件大小
-D 或 --dereference-args
# 与-h参数相同，但是K，M，G是以1000为换算单位
-H 或 --si
# 重复计算硬件链接的文件
-l 或 --count-links 
```

###### 显示目录中文件的大小，单位：KB
```shell
# -a 或 -all
root@DESKTOP-8AR33HE:~# du -a
4       ./.bash_history
4       ./.bashrc
0       ./.profile
4       ./.ssh/known_hosts
4       ./.ssh
12      .
```
###### 显示目录中文件的大小，单位：字节byte
```shell
# -b 或 -bytes
root@DESKTOP-8AR33HE:~# du -b
5424    ./.ssh
13589   .
```
###### 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和，单位：KB
```shell
# -c 或 --total
root@DESKTOP-8AR33HE:~# du -c
4       ./.ssh
12      .
12      total
```
###### 显示目录中文件的大小，单位：KB

```shell
# -k 或 --kilobytes
root@DESKTOP-8AR33HE:~# du -k
4       ./.ssh
12      .
```
###### 显示目录中文件的大小，单位：MB
```shell
# -m 或 --megabytes
root@DESKTOP-8AR33HE:~# du -m
1       ./.ssh
1       .
```
###### 仅显示总计，只列出最后加总的值，单位：KB。
```shell
# -s 或 --summarize
root@DESKTOP-8AR33HE:~# du -s
12      .
```
###### K，M，G为单位，提高信息的可读性
```shell
# -h 或 --human-readable
root@DESKTOP-8AR33HE:~# du -h
4.0K    ./.ssh
12K     .
```
###### 开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过
```shell
# -x 或 --one-file-system
root@DESKTOP-8AR33HE:~# du -x
4       ./.ssh
12      .
root@DESKTOP-8AR33HE:~# du --one-file-system
4       ./.ssh
12      .
```
###### 显示个别目录的大小时，并不含其子目录的大小
```shell
# -S 或 --separate-dirs
root@DESKTOP-8AR33HE:~# du -S
4       ./.ssh
8       .
root@DESKTOP-8AR33HE:~# du --separate-dirs
4       ./.ssh
8       .
```
###### 在<文件>指定目录或文件 
```shell
# -X <文件> 或 --exclude-from=<文件>
root@DESKTOP-8AR33HE:~# du -X 1.txt
4       ./.ssh
16      .
root@DESKTOP-8AR33HE:~# du --exclude-from=1.txt
4       ./.ssh
16      .
```

###### 查看文件大小和文件内文件大小

```
root@DESKTOP-8AR33HE:~# du -sh /bin/
15M     /bin/
root@DESKTOP-8AR33HE:~# du -sh /bin/*
1.1M    /bin/bash
700K    /bin/btrfs
368K    /bin/btrfs-debug-tree
364K    /bin/btrfs-find-root
388K    /bin/btrfs-image
368K    /bin/btrfs-map-logical
364K    /bin/btrfs-select-super
364K    /bin/btrfs-zero-log
```

######  Linux 查找占用空间最大的文件与目录
```
# du -h --max-depth=1
root@DESKTOP-8AR33HE:~# cd /bin/
root@DESKTOP-8AR33HE:/bin# du -h --max-depth=1
15M     .
```
###### df：显示磁盘分区上可以使用的磁盘空间
```
# 查看全部文件系统，单位默认KB
# -a

root@DESKTOP-8AR33HE:/# df -a
Filesystem     1K-blocks     Used Available Use% Mounted on
rootfs          83887100 76061200   7825900  91% /
none            83887100 76061200   7825900  91% /dev
sysfs                  0        0         0    - /sys
proc                   0        0         0    - /proc
devpts                 0        0         0    - /dev/pts
none            83887100 76061200   7825900  91% /run
none            83887100 76061200   7825900  91% /run/lock
none            83887100 76061200   7825900  91% /run/shm
none            83887100 76061200   7825900  91% /run/user
binfmt_misc            0        0         0    - /proc/sys/fs/binfmt_misc
cgroup          83887100 76061200   7825900  91% /sys/fs/cgroup
cgroup                 0        0         0    - /sys/fs/cgroup/devices
C:\             83887100 76061200   7825900  91% /mnt/c
D:\            165732676 70237472  95495204  43% /mnt/d

# 使用-h选项以KB、MB、GB的单位来显示，可读性高
# -h

root@DESKTOP-8AR33HE:/# df -h
Filesystem      Size  Used Avail Use% Mounted on
rootfs           81G   73G  7.5G  91% /
none             81G   73G  7.5G  91% /dev
none             81G   73G  7.5G  91% /run
none             81G   73G  7.5G  91% /run/lock
none             81G   73G  7.5G  91% /run/shm
none             81G   73G  7.5G  91% /run/user
cgroup           81G   73G  7.5G  91% /sys/fs/cgroup
C:\              81G   73G  7.5G  91% /mnt/c
D:\             159G   67G   92G  43% /mnt/d
```