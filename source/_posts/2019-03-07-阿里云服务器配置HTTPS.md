---
layout: photo
title: 阿里云服务器配置HTTPS
tags:
  - Django
date: 2019-03-07 19:28:36
categories: Django
photos:
---
小程序开发前期可以选择忽略HTTPS的校验，发布上线时必须使用HTTPS的域名，否则无法成功上线，故将之前的部署的http的程序改为HTTPS。
<!--more-->
## 配置HTTPS ##

##### 1.阿里云申请免费的SSL证书 #####
	申请域名对应的证书，将证书两个文件拷贝/etc/nginx目录下，新建一个名为cert文件
##### 2.修改nginx位置文件 #####
	server {
	 listen 443;
	 server_name localhost;
	 ssl on;
	 root html;
	 index index.html index.htm;
	 ssl_certificate   cert/XXX.pem; #新建cert文件夹
	 ssl_certificate_key  cert/XXX.key; #新建cert文件夹
	 ssl_session_timeout 5m;
	 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
	 ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	 ssl_prefer_server_ciphers on;
	 location / {
	    include /etc/nginx/uwsgi_params;
	    uwsgi_pass 127.0.0.1:8001;  #对于动态请求，转发到本机的8001端口，也就是uwsgi监听的端口
	  }
	
	  location /static/ {
	    alias /www/data/static/;    #设定静态文件所在目录
	  }
	}	

注：

查看443：

	netstat  -ano  | grep  :443
	返回为空，没有任何返回结果，重启了nginx就好了。此处是最大的坑，配置好了conf，一定要重启nginx服务，让它监听443端口
# 注：阿里云-ecs-安全组上添加443端口访问 #
若有结果用kill将其杀掉，再重启nginx

参考链接：[阿里云官方教程](https://help.aliyun.com/knowledge_detail/95491.html?spm=5176.2020520154.cas.29.549c56a7ayzM1I)
