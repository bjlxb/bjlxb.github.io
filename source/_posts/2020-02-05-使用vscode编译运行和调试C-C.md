---
layout: photo
title: 使用vscode编译运行和调试C/C++
tags:
  - C/C++
date: 2020-02-05 22:32:06
categories: C/C++
photos:
---

记录一下vscode编译运行和调试C/C++的过程！

<!--more-->

### 一、前期准备

#### 1.  安装vscode

   根据自己的环境去[官网](https://code.visualstudio.com/)下载对应版本的Visual Studio Code

   

#### 2. 安装解压软件

   推荐开源压缩软件[7-Zip](https://www.7-zip.org/)，虽然界面不是很美观，但是功能还是很强大的！

#### 3. 下载C/C++编译器

​	因为vscode只是一个代码编译器，并没有集成C/C++的编译器，需要下载一个C/C++的编译器，推荐`mingw`系列（[mingw](https://sourceforge.net/projects/mingw/files/MinGW/)或者[mingw-w64](https://sourceforge.net/projects/mingw-w64/files/mingw-w64/)，`mingw-w64`比`mingw`功能更强大），因为中国环境问题mingw-w64难以下载，推荐[离线下载](https://sourceforge.net/projects/mingw-w64/files/Toolchains targetting Win64/Personal Builds/mingw-builds/8.1.0/threads-posix/seh/x86_64-8.1.0-release-posix-seh-rt_v6-rev0.7z)，但是需要手动添加环境变量！

#### 4. 配置mingw-w64

​	具体细节可以查看另一篇文章内容：

​		[直达链接](https://bjlxb.github.io/2020/02/06/windows%E5%AE%89%E8%A3%85MinGW-w64/#more)

#### 5. 验证mingw可用

​	打开cmd或Windows PowerShell输入gcc -v，若出现版本信息就表明mingw配置成功，如果未出现版本信息表明配置有问题，需要查找原因。

#### 6. 安装插件

  依次安装下方三个插件

- chinese(simplified)

- C/C++

- Code Runner

  <img src="/image/vscode-C/vscode-1.png">
### 二、编译运行程序
编译运行两种方法：
  1. 使用Code Runner一键编译运行程序

  2. 使用vscode的集成终端使用命令行编译运行

------


新建文件：文件>新建文件>添加如下代码>Ctrl+S保存文件并**将文件后缀名改为`.c`或`.cpp`**
```c
#include <stdio.h>

int main(){
   char name[100];
   printf("What is your name?\n");
   scanf("%s",name);
   printf("Hello,%s,nice to meet you!\n",name);
}
```

点击右上角的三角形按钮(Ctrl+Alt+N)运行代码：
<img src="/image/vscode-C/vscode-2.png">

运行后会出现如下情况：
<img src="/image/vscode-C/vscode-3.png">

原因：程序中使用了`scanf`函数从键盘读取一串字符，但此时无法输入数据，也无法结束程序。

解决方案：

1. 首先重启vscode（关闭vscode再重新打开）

2. **文件>首选项>设置**
    <img src="/image/vscode-C/vscode-4.png">

3. **用户>拓展>Run Code Configuration>Run In Termina**选中
    <img src="/image/vscode-C/vscode-5.png">

4. 修改后程序就可以正常运行了，结束运行点击垃圾桶标志
    <img src="/image/vscode-C/vscode-6.png">

C/C++另一种选择：`C/C++ Compile Run`，配置插件：文件>首选项>设置>扩展>Compile Run Configuration的`Run-in-external-terminal`选项后可以出现和dev / codeblocks / vc一样的外部窗口

  <img src="/image/vscode-C/vscode-7.png">

------

进入需要编译文件目录下，输入如下完整编译指令：

```c
g++ xxx.cpp -o xxx.exe -lwsock32
```

