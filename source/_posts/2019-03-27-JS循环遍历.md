---
layout: photo
title: JS循环遍历
tags:
  - JavaScript
date: 2019-03-27 22:45:07
categories: JavaScript
photos:
---
工作中,后台返回json数据,需要循环遍历生成响应li
<!--more-->
### for方法
- 最通用的方式
```javascript
for(var i = 0; i < Array.length; i++) {
	//执行代码
}

```
关于中断
break; 语法可以完成中断
return; 语法直接报错(未捕获的语法错误: 非法返回声明)

- for...of
```javascript
for(var i of Array) {
	//执行代码
}
var a = ['A', 'B', 'C'];
var s = new Set(['A', 'B', 'C']);
var m = new Map([[1, 'x'], [2, 'y'], [3, 'z']]);
for (var x of a) { // 遍历Array
	console.log(x);
	// 'A', 'B', 'C'
}

for (var x of s) { // 遍历Set
	console.log(x);
	// 'A', 'B', 'C'
}
for (var x of m) { // 遍历Map
	console.log(x[0] + '=' + x[1]);
	// 1=x, 2=y, 3=z
}
```
- for...in
```javascript
for(var i in Array) {
	//执行代码
}
var a = ['A', 'B', 'C'];
a.name = 'Hello';
for (var x in a) {
	console.log(x);
	// '0', '1', '2', 'name'
}

var a = ['A', 'B', 'C'];
a.name = 'Hello';
for (var x of a) {
	console.log(x); 
	// 'A', 'B', 'C'
}
```
for...of与for...in的区别：
	for ... in循环由于历史遗留问题，它遍历的实际上是对象的属性名称。
	一个Array数组实际上也是一个对象，它的每个元素的索引被视为一个属性。

----

### 数组方法(ES5)
Array.prototype.forEach()
iterable内置的forEach方法
```javascript
array.forEach(callback[, thisArg])
// callback函数参数
// 第一个参数：当前项
// 第二个参数：当前项的索引
// 第三个参数：数组本身
//thisArg参数
//这个参数是可选参数。
//主要用于绑定函数内this的作用域，否则你在函数内调用this，this指代全局对象Window(ES3)或者undefined(ES5严格模式下)
// 例子:
var arr = new Array(["a",1,"b",2],["c",3,"d",5]);
arr.forEach(function(item){
      console.log(item);
      //a,1,b,2和c,3,d,5
});
arr.forEach(function(item,i){
	alert(item+"_"+i); 
	//a,1,b,2_0和c,3,d,5_1;
	item.forEach(function(items,j){
		console.log(items+"-"+j);
		//a-0;1-1;b-2;2-3; c-0;3-1;d-2;5-3;
     });
});

var a = ['A', 'B', 'C'];
a.forEach(function (element, index, array) {
  // element: 指向当前元素的值
  // index: 指向当前索引
  // array: 指向Array对象本身
  console.log(element);//'A','B','C'
});

var s = new Set(['A', 'B', 'C']);
s.forEach(function (element, sameElement, set) {
  console.log("参数1="+element+",参数2="+sameElement);
});
//参数1=A,参数2=A
//参数1=B,参数2=B
//参数1=C,参数2=C

var m = new Map([[1, 'x'], [2, 'y'], [3, 'z']]);
m.forEach(function (value, key, map) {
  console.log("参数1="+value+",参数2="+key);
});
//参数1=x,参数2=1
//参数1=y,参数2=2
//参数1=z,参数2=3
```
关于中断(MDN原话)
	没有办法中止或者跳出 forEach 循环，除了抛出一个异常。如果你需要这样，使用forEach()方法是错误的，你可以用一个简单的循环作为替代。如果您正在测试一个数组里的元素是否符合某条件，且需要返回一个布尔值，那么可使用 Array.every或 Array.some。

----

###  jQuery方法
```javascript
$(dom).each(function(index, Element) ) { 
	//执行代码
}
// 参数
// 第一个参数：当前索引，从0开始
// 第二个参数：指被当前迭代的元素，与在函数体内的this等价

var arr = new Array(["a",1,"b",2],["c",3,"d",5]);
$.each(arr,function(item){
	console.log(item);//0;1
});
$.each(arr,function(i,item){
	console.log(item+"_"+i);
	//a,1,b,2_0和c,3,d,5_1;
	$.each(item,function(j,items){
		console.log(items+'-'+j);
		//a-0;1-1;b-2;2-3; c-0;3-1;d-2;5-3;
	});
});
```



[参考链接1](https://www.jb51.net/article/110487.htm)

[参考链接2](https://www.cnblogs.com/xhy-steve/p/5618441.html)