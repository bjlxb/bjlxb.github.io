---
layout: photo
title: js图片与base64互相转换
tags:
  - JavaScript
date: 2019-04-20 21:32:05
categories: JavaScript
photos:
---
Django使用pillow模块，将生成的二维码图片转换为base64输出给前端，显示成弹框，需要js将base64转换成图片。
<!--more-->
#### js将图片转化为base64
```JavaScript
var img = "imgurl";//imgurl 就是你的图片路径  

function getBase64Image(img) {  
     var canvas = document.createElement("canvas");  
     canvas.width = img.width;  
     canvas.height = img.height;  
     var ctx = canvas.getContext("2d");  
     ctx.drawImage(img, 0, 0, img.width, img.height);  
     var ext = img.src.substring(img.src.lastIndexOf(".")+1).toLowerCase();  
     var dataURL = canvas.toDataURL("image/"+ext);  
     return dataURL;  
}  

var image = new Image();  
image.src = img;  
image.onload = function(){  
  var base64 = getBase64Image(image);  
  console.log(base64);  
}  
```
#### js将base64转化为图片格式

```JavaScript
document.getElementById('img').setAttribute( 'src', 'data:image/png;base64,' +imgurl);
```

[参考链接](https://www.cnblogs.com/zhuchenglin/p/7528723.html)

