---
layout: photo
title: shell基础0
tags:
  - Tool
date: 2019-10-01 12:28:27
categories: Tool
photos:
---

记录shell输入输出和变量相关内容

<!--more-->

### Shell基础
##### 第一个shell程序：
新建文件，以sh为后缀名，扩展名不影响脚本执行，见名知意。
```bash
#!/bin/bash
# "#!" 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell。
echo "Hello World!"
# echo命令用于向窗口输出文本。
```
##### 执行脚本：
- 第一种方式：
  1.cd到脚本目录
  2.chmod +x ./脚本名称.sh  #使脚本具有执行权限
  3../脚本名称.sh  #执行脚本
###### 注意，一定要写成"./脚本名称.sh"，而不是直接写"脚本名称.sh"
- 第二种方式：
	sh "脚本名称.sh"

-------

##### shell脚本获取输入
在终端中获取输入信息：**read**
```bash
#!/bin/bash
echo "请输入名称:"
read name
echo "您输入的名称为:$name"
```
结果：
```bash
请输入名称:
张三
您输入的名称为:张三
```
read带提示信息：
```bash
#!/bin/bash
read -p "请输入名称:" name
echo "您输入的名称为:$name"
```
结果：
```bash
请输入名称:张三
您输入的名称为:张三
```

-----

##### shell变量
###### 定义变量
Shell 支持以下三种定义变量的方式：
```bash
name=zhangsan
name='zhangsan'
name="zhangsan"
```
name是变量名，zhangsan是赋值给变量的值。
若值不包含空白符（例如空格、Tab缩进等），那么可以不使用引号。
若值包含空白符，那么就必须使用引号包围起来。
> 注：赋值号的周围不能有空格

Shell 变量的命名规范
- 变量名由数字、字母、下划线组成。
- 必须以字母或者下划线开头。
- 不能使用 Shell 里的关键字（通过 help 命令可以查看保留关键字）。
###### 使用变量
使用变量，在变量名前面加美元符号$。
```bash
name="张三"
echo $name
echo ${name}
# 变量名外面的花括号{}为可选，花括号是为了帮助解释器识别变量的边界。
language="Java"
echo "I like ${language}Script"
# 若不加{}输出为"I like ",并不是我们期望的结果。
```
> 注：推荐给所有变量加上花括号{ }。

###### 修改变量的值
对已经定义的变量重新赋值：
```bash
name="张三"
echo ${name}
name="李四"
echo ${name}
```
> 注：只有使用时变量前需要加$，修改时不需要。

###### 单引号和双引号的区别
```bash
#!/bin/bash
name="张三"
my_name='我的名字是：${name}'
my_name2="我的名字是：${name}"
echo $my_name
echo $my_name2
```
输出结果：
```bash
我的名字是：${name}
我的名字是：张三
```
> 单引号''包围变量的值时，单引号里有什么输出什么，变量和命令（命令需要反引起来）也会原样输出。
> 单引号适合定义显示纯字符串的情况，即不希望解析变量、命令等的场景。
> 双引号""包围变量的值时，会先解析里面的变量和命令，而不是把双引号中的变量名和命令原样输出。
> 双引号适合有变量和命令并且想将其解析后再输出的变量。
###### 将命令的结果赋值给变量

```bash
name="张三"
# 方式一
variable=`name`
# 方式二
variable=$(name)
```
> 方式一把命令用反引号包围起来，反引号和单引号非常相似，容易产生混淆，所以不推荐使用这种方式。
> 方式二用$()包围起来，区分明显，推荐使用这种方式。
###### 只读变量
使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变。
```bash
#!/bin/bash
name="张三"
readonly name
myUrl="李四"
```
运行后报错：
```bash
NAME: This variable is read only.
```
###### 删除变量
使用 unset 命令可以删除变量。
```bash
unset name
```
> 变量被删除后不能再次使用。
> unset 命令不能删除只读变量。
###### 变量类型
1. 局部变量
局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。
2. 环境变量
所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。
3. shell变量
shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行